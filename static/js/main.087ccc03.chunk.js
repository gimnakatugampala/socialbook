(this["webpackJsonpreact-redux-blog-app"]=this["webpackJsonpreact-redux-blog-app"]||[]).push([[0],{422:function(e,t,c){"use strict";c.r(t);var n=c(12),r=c(229),a=c.n(r),s=c(22),i=c(18),o=c(15),l=c(26),j=c(42),d=c(6),u=Object(l.b)((function(e){return{authError:e.auth.authError,auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e((c=t,function(e,t,n){(0,n.getFirebase)().auth().signInWithEmailAndPassword(c.email,c.password).then((function(){e({type:"LOGIN_SUCCESS"})})).catch((function(t){e({type:"LOGIN_ERROR",err:t})}))}));var c}}}))((function(e){var t=Object(n.useState)(""),c=Object(o.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(""),l=Object(o.a)(s,2),j=l[0],u=l[1],b=e.authError;return e.auth.uid?Object(d.jsx)(i.a,{to:"/"}):Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("form",{onSubmit:function(t){t.preventDefault();var c={email:r,password:j};e.signIn(c)},className:"white",style:{padding:"20px",margin:"20px"},children:[Object(d.jsx)("h5",{className:"grey-text text-darken-3",children:"Sign In"}),Object(d.jsxs)("div",{className:"input-field",children:[Object(d.jsx)("label",{htmlFor:"email",children:"Email"}),Object(d.jsx)("input",{type:"email",id:"email",onChange:function(e){return a(e.target.value)}})]}),Object(d.jsxs)("div",{className:"input-field",children:[Object(d.jsx)("label",{htmlFor:"password",children:"Password"}),Object(d.jsx)("input",{type:"password",id:"password",onChange:function(e){return u(e.target.value)}})]}),Object(d.jsxs)("div",{className:"input-field",children:[Object(d.jsx)("button",{className:"btn primary lighten-1 z-depth-0",children:"Login"}),Object(d.jsx)("div",{className:"red-text center",children:b?Object(d.jsxs)("p",{children:[" ",b]}):null})]})]})})})),b=Object(l.b)((function(e){return{auth:e.firebase.auth,authError:e.auth.authError}}),(function(e){return{signUp:function(t){return e(function(e){return function(t,c,n){var r=n.getFirebase,a=n.getFirestore,s=r(),i=a();s.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){return i.collection("users").doc(t.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0],createdAt:new Date})})).then((function(){t({type:"SIGNUP_SUCCESS"})})).catch((function(e){t({type:"SIGNUP_ERROR",err:e})}))}}(t))}}}))((function(e){var t=e.auth,c=e.signUp,r=e.authError,a=Object(n.useState)(""),s=Object(o.a)(a,2),l=s[0],j=s[1],u=Object(n.useState)(""),b=Object(o.a)(u,2),h=b[0],O=b[1],p=Object(n.useState)(""),x=Object(o.a)(p,2),m=x[0],f=x[1],g=Object(n.useState)(""),N=Object(o.a)(g,2),v=N[0],y=N[1];return t.uid?Object(d.jsx)(i.a,{to:"/"}):Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c({email:l,firstName:m,lastName:v,password:h})},className:"white",style:{padding:"20px",margin:"20px"},children:[Object(d.jsx)("h5",{className:"grey-text text-darken-3",children:"Sign Up"}),Object(d.jsxs)("div",{className:"input-field",children:[Object(d.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(d.jsx)("input",{type:"text",id:"firstName",onChange:function(e){return f(e.target.value)}})]}),Object(d.jsxs)("div",{className:"input-field",children:[Object(d.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(d.jsx)("input",{type:"text",id:"lastName",onChange:function(e){return y(e.target.value)}})]}),Object(d.jsxs)("div",{className:"input-field",children:[Object(d.jsx)("label",{htmlFor:"email",children:"Email"}),Object(d.jsx)("input",{type:"email",id:"email",onChange:function(e){return j(e.target.value)}})]}),Object(d.jsxs)("div",{className:"input-field",children:[Object(d.jsx)("label",{htmlFor:"password",children:"Password"}),Object(d.jsx)("input",{type:"password",id:"password",onChange:function(e){return O(e.target.value)}})]}),Object(d.jsxs)("div",{className:"input-field",children:[Object(d.jsx)("button",{className:"btn primary lighten-1 z-depth-0",children:"Sign Up"}),Object(d.jsx)("div",{className:"red-text center",children:r?Object(d.jsx)("p",{children:r}):null})]})]})})})),h=c(109),O=c.n(h),p=function(e){var t=e.project;return Object(d.jsx)("div",{className:"card z-depth-0 project-summary",children:Object(d.jsxs)("div",{className:"card-content grey-text text-darken-3",children:[Object(d.jsx)("span",{className:"card-title",children:t.title}),Object(d.jsxs)("p",{children:["Posted By ",t.authorFirstName," ",t.authorLastName]}),Object(d.jsx)("p",{className:"grey-text",children:O()(t.createdAt.toDate().toString()).calendar()})]})})},x=function(e){var t=e.projects;return console.log(t),Object(d.jsx)("div",{className:"project-list section",children:t&&t.map((function(e){return Object(d.jsx)(s.b,{to:"/project/"+e.id,children:Object(d.jsx)(p,{project:e},e.id)},e.id)}))})},m=function(e){var t=e.notifications;console.log(t);var c=t.slice(0,4).sort((function(e,t){return e.createdAt-t.createdAt}));return Object(d.jsx)("div",{className:"section",children:Object(d.jsx)("div",{className:"card z-depth-0",children:Object(d.jsxs)("div",{className:"card-content",children:[Object(d.jsx)("span",{className:"card-title",children:"Notifications"}),Object(d.jsx)("ul",{className:"online-users",children:c&&c.map((function(e,t){return Object(d.jsxs)("li",{children:[Object(d.jsxs)("span",{className:"blue-text",children:[e.user," "]}),Object(d.jsx)("span",{children:e.content}),Object(d.jsx)("div",{className:"note-date grey-text",children:e.createdAt})]},t)}))})]})})})},f=function(e){var t=e.trendings;return Object(d.jsx)("div",{className:"section",children:Object(d.jsx)("div",{className:"card z-depth-0",children:Object(d.jsxs)("div",{className:"card-content",children:[Object(d.jsx)("span",{className:"card-title",children:"Trending"}),Object(d.jsx)("ul",{class:"collection",style:{margin:"-10px"},children:t&&t.map((function(e,t){return Object(d.jsx)("li",{class:"collection-item",children:Object(d.jsxs)("a",{href:e.url,style:{display:"flex",justifyContent:"space-between"},target:"_blank",children:[Object(d.jsx)("span",{style:{fontSize:"15px"},children:e.name}),Object(d.jsx)("span",{style:{fontSize:"15px",backgroundColor:"#26a69a",color:"white"},children:e.tweet_volume})]})},t)})).slice(0,4)})]})})})},g=c(37),N=Object(g.d)(Object(l.b)((function(e){return{projects:e.firestore.ordered.projects,auth:e.firebase.auth}})),Object(j.firestoreConnect)([{collection:"projects"}]))((function(e){var t=e.projects,c=e.auth,r=Object(n.useState)([]),a=Object(o.a)(r,2),s=a[0],l=a[1],j=Object(n.useState)([]),u=Object(o.a)(j,2),b=u[0],h=u[1];return Object(n.useEffect)((function(){fetch("https://socialbook2021.herokuapp.com/notifications").then((function(e){return e.json()})).then((function(e){return l(e)})),fetch("https://socialbook2021.herokuapp.com/trends").then((function(e){return e.json()})).then((function(e){return h(e[0].trends)}))}),[]),setInterval((function(){fetch("https://socialbook2021.herokuapp.com/notifications").then((function(e){return e.json()})).then((function(e){return l(e)}))}),1e5),c.uid?Object(d.jsx)("div",{className:"dashbaord container",children:Object(d.jsxs)("div",{className:"row",children:[Object(d.jsx)("div",{className:"col 12 m6",children:Object(d.jsx)(x,{projects:t})}),Object(d.jsx)("div",{className:"col 12 m5  offset-m1",children:Object(d.jsx)(m,{notifications:s})}),Object(d.jsx)("div",{className:"col 12 m5 offset-m1",children:Object(d.jsx)(f,{trendings:b&&b})})]})}):Object(d.jsx)(i.a,{to:"/signin"})})),v=Object(l.b)(null,(function(e){return{signOut:function(){return e((function(e,t,c){(0,c.getFirebase)().auth().signOut().then((function(){e({type:"SIGNOUT_SUCCESS"})}))}))}}}))((function(e){return Object(d.jsxs)("ul",{className:"right",children:[Object(d.jsx)("li",{children:Object(d.jsx)(s.c,{to:"/create",children:"New Project"})}),Object(d.jsx)("li",{children:Object(d.jsx)("a",{onClick:e.signOut,children:"Logout"})}),Object(d.jsx)("li",{children:Object(d.jsx)(s.c,{to:"/",className:"btn btn-floating primary lighten-1",children:e.profile.initials})})]})})),y=function(){return Object(d.jsxs)("ul",{className:"right",children:[Object(d.jsx)("li",{children:Object(d.jsx)(s.c,{to:"/signup",children:"SignUp"})}),Object(d.jsx)("li",{children:Object(d.jsx)(s.c,{to:"/signin",children:"Login"})})]})},S=Object(l.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}))((function(e){var t=e.auth,c=e.profile,n=t.uid?Object(d.jsx)(v,{profile:c}):Object(d.jsx)(y,{});return console.log(t),Object(d.jsx)("nav",{className:"nav-wrapper grey darken-3",children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(s.b,{to:"/",style:{textAlign:"left",fontSize:"25px"},children:"SocialBook"}),n]})})})),E=c(38),C=Object(l.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{createProject:function(t){return e(function(e){return function(t,c,n){n.getFirebase;var r=(0,n.getFirestore)(),a=c().firebase.profile,s=c().firebase.auth.uid;r.collection("projects").add(Object(E.a)(Object(E.a)({},e),{},{authorFirstName:a.firstName,authorLastName:a.lastName,authorId:s,createdAt:new Date})).then((function(){t({type:"CREATE_PROJECT",project:e})})).catch((function(e){t({type:"CREATE_PROJECT_ERROR",err:e})}))}}(t))}}}))((function(e){var t=Object(n.useState)(""),c=Object(o.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(""),l=Object(o.a)(s,2),j=l[0],u=l[1];return e.auth.uid?Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("form",{onSubmit:function(t){t.preventDefault();var c={title:r,content:j};e.createProject(c),e.history.push("/")},className:"white",style:{padding:"20px",margin:"20px"},children:[Object(d.jsx)("h5",{className:"grey-text text-darken-3",children:"Create Post"}),Object(d.jsxs)("div",{className:"input-field",children:[Object(d.jsx)("label",{htmlFor:"title",children:"Title"}),Object(d.jsx)("input",{type:"text",id:"title",onChange:function(e){return a(e.target.value)}})]}),Object(d.jsxs)("div",{className:"input-field",children:[Object(d.jsx)("label",{htmlFor:"content",children:"Project Content"}),Object(d.jsx)("textarea",{id:"content",onChange:function(e){return u(e.target.value)},className:"materialize-textarea"})]}),Object(d.jsx)("div",{className:"input-field",children:Object(d.jsx)("button",{className:"btn primary lighten-1 z-depth-0",children:"Create"})})]})}):Object(d.jsx)(i.a,{to:"/signin"})})),w=Object(g.d)(Object(l.b)((function(e,t){var c=t.match.params.id,n=e.firestore.data.projects;return{project:n?n[c]:null,auth:e.firebase.auth}})),Object(j.firestoreConnect)([{collection:"projects"}]))((function(e){var t=e.project;return e.auth.uid?t?Object(d.jsx)("div",{className:"container section project-details",children:Object(d.jsxs)("div",{className:"card z-depth-0",children:[Object(d.jsxs)("div",{className:"card-content",children:[Object(d.jsx)("span",{className:"card-title",children:t.title}),Object(d.jsx)("p",{children:t.content})]}),Object(d.jsxs)("div",{className:"card-action grey lighten-4 grey-text",children:[Object(d.jsxs)("div",{children:["Posted By ",t.authorFirstName," ",t.authorLastName," "]}),Object(d.jsx)("div",{children:O()(t.createdAt.toDate().toString()).calendar()})]})]})}):Object(d.jsx)("div",{className:"container center",children:Object(d.jsx)("p",{children:"Loading.."})}):Object(d.jsx)(i.a,{to:"/signin"})})),R=function(){return Object(d.jsx)(s.a,{children:Object(d.jsxs)("div",{style:{backgroundColor:"#ccc",height:"200vh"},children:[Object(d.jsx)(S,{}),Object(d.jsxs)(i.d,{children:[Object(d.jsx)(i.b,{exact:!0,path:"/",component:N}),Object(d.jsx)(i.b,{path:"/project/:id",component:w}),Object(d.jsx)(i.b,{path:"/signin",component:u}),Object(d.jsx)(i.b,{path:"/signup",component:b}),Object(d.jsx)(i.b,{path:"/create",component:C})]})]})})},F={authError:null},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return console.log("login error"),Object(E.a)(Object(E.a)({},e),{},{authError:"Login Failed"});case"LOGIN_SUCCESS":return console.log("login success"),Object(E.a)(Object(E.a)({},e),{},{authError:null});case"SIGNOUT_SUCCESS":return console.log("signout success"),e;case"SIGNUP_SUCCESS":return console.log("signup success"),Object(E.a)(Object(E.a)({},e),{},{authError:null});case"SIGNUP_ERROR":return console.log("signup error"),Object(E.a)(Object(E.a)({},e),{},{authError:t.action.message});default:return e}},k={projects:[{id:"1",title:"help me find peach",content:"blah blah"},{id:"2",title:"help me find peach",content:"blah blah"},{id:"3",title:"help me find peach",content:"blah blah"}]},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_PROJECT":return console.log("created project",t.project),e;case"CREATE_PROJECT_ERROR":return console.log("create project error",t.err),e;default:return e}},_=c(78),A=Object(g.c)({auth:I,project:P,firestore:_.firestoreReducer,firebase:j.firebaseReducer}),U=c(231),L=c(113);c(423),c(420);L.a.initializeApp({apiKey:"AIzaSyCyI4Xi6ytFBSXyr_xErX2p6BorLY_mLoM",authDomain:"socialbook-287a9.firebaseapp.com",projectId:"socialbook-287a9",storageBucket:"socialbook-287a9.appspot.com",messagingSenderId:"224862278485",appId:"1:224862278485:web:7a89be4b45e0de2fdfd5dc"}),L.a.firestore().settings({timestampsInSnapshots:!0});var z=L.a,T=Object(g.e)(A,Object(g.d)(Object(g.a)(U.a.withExtraArgument({getFirebase:j.getFirebase,getFirestore:_.getFirestore})),Object(_.reduxFirestore)(z),Object(j.reactReduxFirebase)(z,{useFirestoreForProfile:!0,userProfile:"users",attachAuthIsReady:!0})));T.firebaseAuthIsReady.then((function(){a.a.render(Object(d.jsx)(l.a,{store:T,children:Object(d.jsx)(R,{})}),document.getElementById("root"))}))}},[[422,1,2]]]);
//# sourceMappingURL=main.087ccc03.chunk.js.map